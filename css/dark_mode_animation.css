/* 3-State Theme Switch Animation (Based on User's Original Design) */
/* Scoped variables */
:root {
    --theme-switch-scale: 0.85;
    /* Scaled to fit header */
    --toggle-width-base: 90px;
    /* Widened for 3 states (Original was 60) */
    --toggle-height-base: 34px;
    --knob-size-base: 26px;
    --padding-base: 4px;
}

.theme-switch-wrapper {
    display: flex;
    align-items: center;
    justify-content: center;
    margin-left: 0.5rem;
}

/* Container */
.tri-state-toggle {
    position: relative;
    display: inline-block;
    width: calc(var(--theme-switch-scale) * var(--toggle-width-base));
    height: calc(var(--theme-switch-scale) * var(--toggle-height-base));
    cursor: pointer;
}

/* Hidden Radios */
.tri-state-toggle input[type="radio"] {
    position: absolute;
    width: 33.33%;
    height: 100%;
    opacity: 0;
    z-index: 100;
    cursor: pointer;
    margin: 0;
}

#theme_light {
    left: 0;
}

#theme_dark {
    left: 33.33%;
}

#theme_orbital {
    left: 66.66%;
}

/* === SLIDER TRACK & BACKGROUND === */
.slider {
    position: absolute;
    inset: 0;
    background-color: #2196f3;
    /* Light Blue Default */
    transition: 0.4s;
    z-index: 0;
    overflow: hidden;
    border-radius: calc(var(--theme-switch-scale) * var(--toggle-height-base));
    box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.2);
}

/* Background States */
#theme_dark:checked~.slider {
    background-color: #0b1220;
    /* Deep Dark */
}

#theme_orbital:checked~.slider {
    background-color: #3b0a45;
    /* Orbital Purple Base */
    background-image: linear-gradient(to right, #6a11cb 0%, #2575fc 100%);
}

/* Focus styles */
.tri-state-toggle input:focus~.slider {
    box-shadow: 0 0 calc(var(--theme-switch-scale) * 2px) #2196f3;
}

/* === SUN / MOON / PLANET KNOB === */
/* Container handles Position & Transform */
.sun-moon {
    position: absolute;
    height: calc(var(--theme-switch-scale) * var(--knob-size-base));
    width: calc(var(--theme-switch-scale) * var(--knob-size-base));
    left: calc(var(--theme-switch-scale) * var(--padding-base));
    bottom: calc(var(--theme-switch-scale) * var(--padding-base));
    /* background-color: removed; */
    transition: 0.4s cubic-bezier(0.68, -0.55, 0.27, 1.55);
    /* Transform transition */
    /* border-radius: removed; */
    z-index: 5;
    /* box-shadow: removed; */
}

/* New Body Element handles Color & Shape to allow layering */
.sun-moon-body {
    position: absolute;
    inset: 0;
    border-radius: 50%;
    background-color: #fece4e;
    /* Default Sun */
    transition: 0.4s;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    z-index: 1;
    /* Body is layer 1 */
}

/* Knob Positions & Styles */
/* Light (Default) - 0px translation */

/* Dark - Center */
#theme_dark:checked~.slider .sun-moon {
    transform: translateX(calc(var(--theme-switch-scale) * 28px)) rotate(180deg);
}

#theme_dark:checked~.slider .sun-moon .sun-moon-body {
    background-color: #ffffff;
    /* Bright Moon */
    box-shadow: inset -2px -2px 0 0 #9ca3af;
}


/* Orbital - Right */
#theme_orbital:checked~.slider .sun-moon {
    transform: translateX(calc(var(--theme-switch-scale) * 56px));
}

#theme_orbital:checked~.slider .sun-moon .sun-moon-body {
    background-color: #e0c3fc;
    box-shadow: 0 0 5px #fff, inset -2px -2px 4px #8e2de2;
}

/* === MOON CRATERS (Dots) === */
.moon-dot {
    opacity: 0;
    transition: 0.4s;
    fill: #9ca3af;
    position: absolute;
    z-index: 2;
    /* Sit on top of body (z-index 1) */
}

/* Show in Dark */
#theme_dark:checked~.slider .sun-moon .moon-dot {
    opacity: 1;
}

/* Hide in Orbital? Maybe keep distinct texture or hide */
#theme_orbital:checked~.slider .sun-moon .moon-dot {
    opacity: 0;
}

#moon-dot-1 {
    left: calc(var(--theme-switch-scale) * 10px);
    top: calc(var(--theme-switch-scale) * 3px);
    width: calc(var(--theme-switch-scale) * 6px);
    height: calc(var(--theme-switch-scale) * 6px);
}

#moon-dot-2 {
    left: calc(var(--theme-switch-scale) * 2px);
    top: calc(var(--theme-switch-scale) * 10px);
    width: calc(var(--theme-switch-scale) * 10px);
    height: calc(var(--theme-switch-scale) * 10px);
}

#moon-dot-3 {
    left: calc(var(--theme-switch-scale) * 16px);
    top: calc(var(--theme-switch-scale) * 18px);
    width: calc(var(--theme-switch-scale) * 3px);
    height: calc(var(--theme-switch-scale) * 3px);
}

/* === LIGHT RAYS (Sun) === */
.light-ray {
    position: absolute;
    z-index: -1;
    fill: white;
    opacity: 0.2;
    transition: 0.4s;
    pointer-events: none;
}

/* Hide rays in Dark & Orbital */
#theme_dark:checked~.slider .sun-moon .light-ray,
#theme_orbital:checked~.slider .sun-moon .light-ray {
    opacity: 0;
    transform: scale(0.5);
}

#light-ray-1 {
    left: calc(var(--theme-switch-scale) * -8px);
    top: calc(var(--theme-switch-scale) * -8px);
    width: calc(var(--theme-switch-scale) * 43px);
    height: calc(var(--theme-switch-scale) * 43px);
}

#light-ray-2 {
    left: -50%;
    top: -50%;
    width: calc(var(--theme-switch-scale) * 55px);
    height: calc(var(--theme-switch-scale) * 55px);
}

#light-ray-3 {
    left: calc(var(--theme-switch-scale) * -18px);
    top: calc(var(--theme-switch-scale) * -18px);
    width: calc(var(--theme-switch-scale) * 60px);
    height: calc(var(--theme-switch-scale) * 60px);
}

/* === CLOUDS === */
.cloud-light,
.cloud-dark {
    position: absolute;
    animation: cloud-move 6s infinite linear;
    transition: 0.4s;
    z-index: 2;
}

.cloud-light {
    fill: #fff;
    opacity: 1;
}

.cloud-dark {
    fill: #6b7280;
    /* Darker grey clouds */
    animation-delay: 1s;
    opacity: 0;
}

/* In Dark/Orbital, hide light clouds, show dark/dimmed clouds? */
#theme_dark:checked~.slider .cloud-light,
#theme_orbital:checked~.slider .cloud-light {
    opacity: 0;
}

#theme_dark:checked~.slider .cloud-dark,
#theme_orbital:checked~.slider .cloud-dark {
    opacity: 0.8;
}

#cloud-1 {
    left: calc(var(--theme-switch-scale) * 30px);
    top: calc(var(--theme-switch-scale) * 15px);
    width: calc(var(--theme-switch-scale) * 40px);
}

#cloud-2 {
    left: calc(var(--theme-switch-scale) * 44px);
    top: calc(var(--theme-switch-scale) * 10px);
    width: calc(var(--theme-switch-scale) * 20px);
}

#cloud-3 {
    left: calc(var(--theme-switch-scale) * 18px);
    top: calc(var(--theme-switch-scale) * 24px);
    width: calc(var(--theme-switch-scale) * 30px);
}

#cloud-4 {
    left: calc(var(--theme-switch-scale) * 36px);
    top: calc(var(--theme-switch-scale) * 18px);
    width: calc(var(--theme-switch-scale) * 40px);
}

#cloud-5 {
    left: calc(var(--theme-switch-scale) * 48px);
    top: calc(var(--theme-switch-scale) * 14px);
    width: calc(var(--theme-switch-scale) * 20px);
}

#cloud-6 {
    left: calc(var(--theme-switch-scale) * 22px);
    top: calc(var(--theme-switch-scale) * 26px);
    width: calc(var(--theme-switch-scale) * 30px);
}

@keyframes cloud-move {
    0% {
        transform: translateX(0px);
    }

    50% {
        transform: translateX(calc(var(--theme-switch-scale) * 5px));
    }

    100% {
        transform: translateX(0px);
    }
}

/* === STARS === */
.stars {
    transform: translateY(calc(var(--theme-switch-scale) * -32px));
    opacity: 0;
    transition: 0.4s;
    position: absolute;
    inset: 0;
    z-index: 1;
}

#theme_dark:checked~.slider .stars,
#theme_orbital:checked~.slider .stars {
    transform: translateY(0);
    opacity: 1;
}

.star {
    fill: white;
    position: absolute;
    animation: star-twinkle 2s infinite ease-in-out;
}

#star-1 {
    width: calc(var(--theme-switch-scale) * 20px);
    top: calc(var(--theme-switch-scale) * 2px);
    left: calc(var(--theme-switch-scale) * 3px);
    animation-delay: 0.3s;
}

#star-2 {
    width: calc(var(--theme-switch-scale) * 6px);
    top: calc(var(--theme-switch-scale) * 16px);
    left: calc(var(--theme-switch-scale) * 10px);
}

#star-3 {
    width: calc(var(--theme-switch-scale) * 12px);
    top: calc(var(--theme-switch-scale) * 20px);
    left: calc(var(--theme-switch-scale) * 40px);
    animation-delay: 0.6s;
}

#star-4 {
    width: calc(var(--theme-switch-scale) * 18px);
    top: calc(var(--theme-switch-scale) * 0px);
    left: calc(var(--theme-switch-scale) * 50px);
    animation-delay: 1.3s;
}

/* Extra Stars for Orbital Mode */
#star-5 {
    width: calc(var(--theme-switch-scale) * 8px);
    top: calc(var(--theme-switch-scale) * 28px);
    left: calc(var(--theme-switch-scale) * 60px);
    animation-delay: 0.2s;
}

#star-6 {
    width: calc(var(--theme-switch-scale) * 14px);
    top: calc(var(--theme-switch-scale) * 5px);
    left: calc(var(--theme-switch-scale) * 70px);
    animation-delay: 1.5s;
}

#star-7 {
    width: calc(var(--theme-switch-scale) * 6px);
    top: calc(var(--theme-switch-scale) * 20px);
    left: calc(var(--theme-switch-scale) * 80px);
    animation-delay: 0.9s;
}

#star-8 {
    width: calc(var(--theme-switch-scale) * 10px);
    top: calc(var(--theme-switch-scale) * 15px);
    left: calc(var(--theme-switch-scale) * 35px);
    animation-delay: 0.4s;
}

/* Make extra stars mainly visible in Orbital */
#star-5,
#star-6,
#star-7,
#star-8 {
    opacity: 0;
    transition: opacity 0.4s;
}

#theme_orbital:checked~.slider .stars #star-5,
#theme_orbital:checked~.slider .stars #star-6,
#theme_orbital:checked~.slider .stars #star-7,
#theme_orbital:checked~.slider .stars #star-8 {
    opacity: 1;
}

@keyframes star-twinkle {

    0%,
    100% {
        transform: scale(1);
        opacity: 0.8;
    }

    50% {
        transform: scale(1.2);
        opacity: 1;
    }
}


/* === PLANET RING (Orbital) === */
.planet-ring {
    position: absolute;
    top: 50%;
    left: 50%;
    width: 170%;
    height: 70%;
    border: 3px solid rgba(255, 255, 255, 0.9);
    border-radius: 50%;
    transform: translate(-50%, -50%) rotate(-25deg) scale(0);
    transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    pointer-events: none;
    box-sizing: border-box;
    box-shadow: 0 0 4px rgba(255, 255, 255, 0.8), inset 0 0 2px rgba(255, 255, 255, 0.5);
    z-index: -1;
    /* Layer 1: Behind the planet body */
}

/* Layer 2: Front arc crossing the planet */
/* Layer 2: Front arc crossing the planet */
.planet-ring-front {
    position: absolute;
    top: 50%;
    left: 50%;
    width: 170%;
    height: 70%;
    border: 3px solid rgba(255, 255, 255, 0.9);
    border-radius: 50%;

    /* Hide top half to simulate front perspective */
    border-top-color: transparent;
    border-right-color: rgba(255, 255, 255, 0.9);
    border-bottom-color: rgba(255, 255, 255, 0.9);
    border-left-color: rgba(255, 255, 255, 0.9);

    transform: translate(-50%, -50%) rotate(-25deg) scale(0);
    transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    pointer-events: none;
    box-sizing: border-box;
    box-shadow: 0 0 4px rgba(255, 255, 255, 0.8), inset 0 0 2px rgba(255, 255, 255, 0.5);
    z-index: 2;
    /* In front of body */
}

#theme_orbital:checked~.slider .sun-moon .planet-ring,
#theme_orbital:checked~.slider .sun-moon .planet-ring-front {
    transform: translate(-50%, -50%) rotate(-25deg) scale(1);
}